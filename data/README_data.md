# 数据文件说明

这个目录包含了Fast Hardware (Windows 64位专用版本) 应用程序的数据文件，包括元件库和用户项目。

## 📁 目录结构

### system-components/ - 系统级元件库
采用文件夹分类管理，每个元件一个独立JSON文件，包含标准元件和用户自定义元件。

#### standard/ - 标准元件库
包含系统预置的常用Arduino和电子项目组件，经过验证确保数据准确性：

- **arduino-uno-r3.json** - Arduino Uno R3开发板 (微控制器)
  - 基于ATmega328P微控制器，工作电压5V，最大电流40mA

- **led-5mm.json** - 5mm LED发光二极管 (输出设备)
  - 工作电压2-3.3V，工作电流20mA

- **resistor-220.json** - 220Ω电阻器 (无源器件)
  - 阻值220Ω，精度5%，额定功率0.25W

- **hc05-bluetooth.json** - HC-05蓝牙模块 (通信模块)
  - 工作电压3.3-5V，支持蓝牙串口通信，有效距离10米

- **servo-sg90.json** - SG90舵机 (执行器)
  - 工作电压4.8-6V，扭矩1.8kg/cm，旋转角度180°

#### custom/ - 自定义元件库
包含用户通过元件绘制器创建的元件，支持灵活定制：

- **esp32-devkit.json** - ESP32开发板 (微控制器)
  - WiFi蓝牙双模开发板，工作电压3.3V，支持802.11 b/g/n

- **hc-sr04.json** - HC-SR04超声波传感器 (传感器)
  - 工作电压5V，测量范围2cm-400cm，精度3mm

- **dht22.json** - DHT22温湿度传感器 (传感器)
  - 工作电压3.3-6V，温度范围-40°C到80°C，湿度0-100%RH

- **oled-128x64.json** - OLED显示屏 (输出设备)
  - 128x64像素，I2C接口，工作电压3.3-5V

### projects/ - 用户项目目录
存储所有用户创建的硬件项目，每个项目都是独立的文件夹。

#### 项目结构示例 (LINEXT-2, sample-led-project, SEBT_测距读数)
每个项目采用简化的三文件结构：
```
项目名称/
├── components/              # 项目级元件库 (独立副本)
├── circuit_config.json     # 电路系统配置 (包含项目元数据)
└── generated_code.ino      # LLM生成的Arduino代码
```

## 📝 数据格式规范

### 系统级元件文件格式 (独立JSON文件)
```json
{
  "name": "元件名称",
  "id": "唯一标识符", 
  "description": "元件描述",
  "category": "元件类别",
  "pins": {
    "side1": [引脚数组],
    "side2": [引脚数组],
    "side3": [引脚数组],
    "side4": [引脚数组]
  },
  "dimensions": {
    "width": 宽度,
    "height": 高度
  }
}
```

### 项目级文件格式

#### circuit_config.json - 电路系统配置 (核心文件)
包含完整的项目信息、元件实例、连接关系和画布设置：
```json
{
  "projectName": "项目名称",
  "version": "版本号",
  "description": "项目描述",
  "createdAt": "创建时间",
  "lastModified": "修改时间",
  "components": [
    {
      "componentFile": "元件文件名.json",
      "instanceId": "实例ID",
      "position": [x, y],
      "orientation": "朝向",
      "properties": {自定义属性}
    }
  ],
  "connections": [
    {
      "id": "wire-001",
      "source": {
        "instanceId": "arduino-1",
        "pinId": "side1-12"
      },
      "target": {
        "instanceId": "led-1",
        "pinId": "side3-3"
      },
      "wireType": "ground",
      "description": "LED接地连接",
      "routingPoints": [[200, 180], [350, 180], [350, 130]],
      "style": {"thickness": 2, "dashPattern": []}
    }
  ]
}
```

#### components/ - 项目级元件库
- 存储项目使用的元件定义副本
- 从系统级元件库复制或LLM生成
- 支持项目级定制修改

#### generated_code.ino - Arduino代码文件
- LLM生成的完整功能代码
- 包含详细的中文注释
- 基于circuit_config.json的连接关系自动生成

## 🔧 引脚系统说明

### 引脚类型
- `power`: 电源引脚 (VCC, 5V, 3.3V等)
- `ground`: 接地引脚 (GND)
- `digital_io`: 数字输入输出引脚
- `analog_io`: 模拟输入输出引脚
- `special`: 特殊功能引脚 (PWM, I2C, SPI等)

### 引脚ID格式
元件引脚采用 `边名-序号` 格式标识：
- `side1`: 上边引脚 (通常从左到右编号 1-15)
- `side2`: 右边引脚 (通常从上到下编号 1-15)
- `side3`: 下边引脚 (通常从右到左编号 1-15)
- `side4`: 左边引脚 (通常从下到上编号 1-15)

**示例**: `side1-1` (上边第1个引脚), `side3-2` (下边第2个引脚)

## 🎯 元件类别说明

根据Fast Hardware项目的实际分类体系：

- `microcontroller`: 微控制器 (Arduino, ESP32, Raspberry Pi等主控板)
- `sensor`: 传感器 (温度、湿度、光敏、超声波等各种传感器)
- `actuator`: 执行器 (舵机、电机、继电器等控制设备)
- `power`: 电源模块 (电池、充电器、稳压模块等电源相关)
- `communication`: 通信模块 (蓝牙、WiFi、串口、LoRa等通信设备)
- `auxiliary`: 辅助元件 (连接线、转接板、扩展板等辅助工具)
- `other`: 其他 (不属于以上类别的特殊元件)

## 🔄 工作流程

### 1. 元件管理流程
```
悬浮元件库面板 → 选择元件 → 拖拽到画布 → 自动复制到项目
    ↑
系统元件库 (standard/ + custom/) ← 元件绘制器创建
```

### 2. 项目开发流程
```
用户需求描述 → LLM智能分析 → 选择合适元件 → 生成项目结构
                      ↓
元件复制到项目 → 电路设计 (拖拽连线) → 保存配置 (Ctrl+S)
                      ↓
LLM生成代码 → 手动调整 → 上传到Arduino → 测试验证
```

### 3. 数据管理
- **元件复用**: 一个JSON文件 = 一个元件，复制即用
- **项目独立**: 每个项目有独立的元件副本，可自由修改
- **版本控制**: circuit_config.json记录项目版本和修改时间
- **备份分享**: 整个项目文件夹即可备份或分享

## 🛠️ 开发工具集成

### 悬浮元件库系统 (最新功能)
- **智能面板**: 左侧悬浮，默认收起状态，点击展开
- **一键拖拽**: HTML5原生拖拽，从面板到画布的无缝体验
- **智能布局**: 自适应尺寸，节省界面空间，提升工作效率

### 元件绘制器
- **可视化设计**: 所见即所得的元件形状和引脚布局
- **智能调整**: 自动计算最佳尺寸，确保所有引脚显示完整
- **实时同步**: 属性面板和画布双向同步，无延迟

## ⚠️ 重要注意事项

### 数据完整性
- **元件ID唯一性**: 避免ID冲突，确保系统稳定
- **引脚数据准确性**: 名称和功能必须与实际硬件对应
- **连接关系验证**: 确保电路原理正确，避免短路风险

### 文件管理
- **核心文件保护**: `circuit_config.json` 包含所有项目信息，谨慎修改
- **代码文件可编辑**: 生成的 `.ino` 文件可以手动修改（重新生成会覆盖）
- **元件文件独立**: `components/` 中的元件仅影响当前项目

### 最佳实践
- **定期备份**: 重要项目建议定期备份整个项目文件夹
- **版本管理**: 修改项目时及时更新版本号和修改时间
- **测试验证**: 生成的代码仅供参考，实际使用前务必测试
