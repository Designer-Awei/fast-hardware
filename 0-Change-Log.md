# Fast Hardware 更新日志

## 📝 更新日志

### 🎉 v0.1.7 (2025-09-23)

#### 🚀 系统元件库路径配置 (核心功能)
- 🎯 **双路径管理**: 新增系统元件库存储位置设置，与项目文件夹独立管理
- 📂 **自定义元件库**: 支持用户选择外部文件夹作为元件库保存地址
- 🔧 **智能目录创建**: 自动检测并创建标准元件和自定义元件子文件夹
- 💾 **路径持久化**: 元件库路径设置保存到用户配置文件

#### ✅ 打包部署系统完善
- 📦 **完整数据打包**: data文件夹作为松散文件包含在安装包中
- 🏗️ **路径解析优化**: 打包环境正确解析resources/data目录结构
- 🔧 **安装程序优化**: 只输出NSIS安装程序和unpacked目录，去除ZIP包
- 🚀 **跨环境兼容**: 开发环境和打包环境路径处理统一

#### ✅ 元件保存机制深度完善
- 🎨 **结构化ID生成**: 统一元件ID格式 `[prefix]-[name]-[timestamp]`
- 📁 **智能文件夹管理**: 自动创建和验证元件库目录结构
- 🔄 **编辑模式优化**: 智能查找原文件位置，支持覆盖保存
- 💫 **保存反馈增强**: 详细的保存状态提示和错误处理

#### ✅ 调试体验全面提升
- 📝 **路径日志输出**: 元件库加载时显示详细的读取路径信息
- 🐛 **错误诊断改进**: 提供清晰的路径相关错误信息
- 🔍 **控制台调试**: 便于用户通过开发者工具排查问题

#### ✅ 代码质量优化
- 🧹 **冗余文件清理**: 移除已完成任务的开发辅助脚本
- 📚 **文档同步更新**: CHANGELOG和PRD文档与实际进展保持同步
- 🔧 **配置标准化**: 统一的构建配置和开发工具链

### 🎉 v0.1.6 (2025-09-14)

#### 🚀 项目导入导出系统 (核心功能)
- 🎯 **智能项目导入**: 支持选择项目文件夹，自动验证结构并加载到画布
- 💾 **结构化项目保存**: 区分新项目和现有项目，智能保存机制
- 📁 **标准化项目结构**: components/、circuit_config.json、*.ino文件的完整管理
- 🔄 **数据完整性保障**: 确保元件、连线、画布状态完全同步
- 🎨 **连线跟随功能**: 元件移动时连线自动更新路径
- 🔧 **元件ID稳定化**: 基于类型和位置的稳定ID生成算法

#### ✅ 设置系统深度完善
- 🔑 **API密钥管理**: 支持可见性切换、预填充、持久化存储
- 📂 **项目存储路径**: 统一配置项目保存位置到env.local
- ⌨️ **快捷键说明**: 完整的键盘快捷键参考文档
- 🌐 **外部链接**: 点击跳转到个人网站 (www.design2002.xyz)
- 💾 **配置持久化**: 所有设置自动保存到本地配置文件

#### ✅ 窗口启动体验优化
- 🎯 **智能窗口居中**: 首次启动自动居中显示，解决贴近导航栏问题
- 📐 **跨显示器兼容**: 完美支持多显示器环境和不同分辨率
- 💾 **位置验证机制**: 智能检测窗口位置有效性，自动调整到安全区域

#### ✅ 技术架构增强
- 🔄 **连线系统优化**: 支持手动创建和导入连线的一致性处理
- 🎨 **元件渲染改进**: 朝向控制、尺寸同步、视觉反馈优化
- 📊 **数据结构标准化**: 统一的元件ID和连线引用机制
- 🛠️ **错误处理完善**: 详细的调试信息和错误恢复机制

#### ✅ 用户体验全面提升
- 🎯 **操作反馈优化**: 保存成功提示、加载状态显示
- 🔄 **数据同步完善**: 画布状态与文件系统的实时同步
- 📝 **调试体验改善**: 关键日志保留，冗余日志清理

### 🎉 v0.1.5 (2025-09-11)

#### 🚀 悬浮元件库系统 (全新功能)
- 🎨 **智能悬浮面板**: 左侧悬浮元件库，默认10px窄条收起状态，一键展开
- 📐 **自适应设计**: 高度60%自适应画布区，宽度10px精简，圆角8px现代美观
- 🖱️ **流畅拖拽**: HTML5原生拖拽API，从面板到画布的无缝拖拽体验
- 🎯 **精确渲染**: 圆角矩形主体、多色引脚编码、智能文字居中布局
- 📱 **响应式适配**: 完美支持桌面端、平板端、移动端三种设备类型
- ✨ **悬停反馈**: 动态宽度变化(10px→12px)、颜色过渡，优秀的交互体验
- 🎪 **视觉特效**: 阴影效果、平滑动画过渡，专业级UI设计
- 🔧 **文件系统集成**: 完全基于真实JSON文件，实时同步元件库更新

#### ✅ 用户体验优化
- 新增保存成功提示功能，支持覆盖保存、重命名保存等多种场景
- 修复输入框焦点问题，提高元件设计器稳定性
- 优化窗口尺寸记忆功能，支持最大化状态保存

#### ✅ 元件管理系统完善
- 实现编辑模式与复用模式的智能区分
- 修复编辑模式保存位置错误问题
- 优化元件ID生成策略，确保编辑时覆盖原文件

#### ✅ 复用功能深度修复
- 🐛 修复元件复用初次点击内容不应用的问题
- ✨ 修复元件复用时位置闪烁的视觉问题
- 🔧 修复渲染器初始化警告，消除控制台噪音
- 🎯 修复复用元件ID前缀错误，根据保存位置自动确定前缀
- 💫 优化元件设计器初始化流程，提高响应速度

#### ✅ 删除功能完善
- 🐛 修复删除元件确认弹窗不显示的问题
- 🔧 清理防重复点击的冗余逻辑
- 💪 增强错误处理和调试能力
- 🎨 自定义删除确认对话框，提升用户体验

#### ✅ 技术架构改进
- 完善跨平台兼容性，支持Windows/macOS/Linux
- 优化开发工具链，添加平台检测和错误诊断
- 增强IPC通信安全性和稳定性

#### ✅ 界面样式统一优化
- 🎨 统一标准元件页和自制元件页管理按钮样式，采用红色背景与元件预览页保持一致
- 🔧 修复管理按钮在"返回预览"和"删除元件"状态下的样式统一问题
- ✨ 提升界面视觉一致性，改善用户操作体验

#### ✅ 页面刷新机制完善
- 🐛 修复标准元件页和自制元件页删除元件后页面不自动刷新的问题
- 🔄 优化删除操作后的页面更新逻辑，确保实时反映数据变化
- 💫 提升删除操作的用户体验，避免手动切换页面才能看到更新

#### ✅ 控制台日志深度清理
- 🧹 清理元件设计器缩放操作相关的冗余日志输出
- 🗂️ 清理标签页切换操作的调试日志
- 📝 清理渲染和画布操作的详细日志
- 🔇 大幅减少控制台噪音，提升开发调试体验
- 🎯 保留关键错误日志和重要状态变化日志

### 🎉 v0.1.3 (2025-09-11)

#### ✅ 输入框焦点问题深度修复
- 彻底解决重置元件后输入框无法使用的问题
- 替换原生confirm对话框为自定义对话框，避免焦点丢失
- 增强输入框状态管理，支持标签页切换和窗口焦点变化

#### ✅ 智能ID自动生成功能
- 无需手动输入ID，系统自动生成唯一标识
- 支持中文名称智能转换为英文标识
- 基于元件名称和类别生成可读性强的ID
- 包含时间戳确保ID唯一性
- 格式规范：`[名称]-[时间戳]` 或 `[类别前缀]-[时间戳]`

#### ✅ 保存成功提示功能
- 保存成功后显示友好的绿色通知提示
- 支持新元件保存、重命名保存和覆盖保存
- 通知显示元件名称和操作结果
- 自动消失，不干扰用户操作
- 增强用户操作反馈体验

### 🎉 v0.1.2 (2025-09-11)

#### ✅ 窗口尺寸记忆功能
- 自动保存和恢复窗口尺寸、位置
- 智能边界检查防止窗口超出屏幕
- 实时同步保存配置（防抖优化）
- 完整支持最大化状态保存和恢复

#### ✅ 用户体验大幅提升
- 专业的桌面应用体验
- 窗口状态持久化
- 智能错误恢复机制

### 🎉 v0.1.1 (2025-09-10)

#### ✅ 跨平台兼容性大幅提升
- 智能平台检测和命令适配
- 统一的开发工具链
- 完善的错误处理系统

#### ✅ 元件设计器功能完善
- 智能尺寸调整算法
- 动态属性绑定和同步
- 编辑模式状态保护

#### ✅ 开发体验优化
- 平台检测工具集成
- 智能错误诊断提示
- 详细的调试信息输出

### 🎉 v0.1.0 (2025-09-01)

#### ✅ 初始项目模板
- 基础UI界面
- 安全的IPC通信
- 跨平台构建配置

## 📋 开发路线图

### ✅ 已完成 (v0.1.6)

#### 🎯 MVP核心功能
- ✅ **跨平台兼容性**: Windows/macOS/Linux全平台支持
- ✅ **元件设计器**: 可视化元件设计，智能尺寸调整
- ✅ **窗口尺寸记忆**: 专业的桌面应用体验，自动保存窗口状态
- ✅ **元件库系统集成**: 预览页↔编辑页双向集成，JSON验证，重复处理等

#### 中等优先级任务 (元件库管理)
- ✅ **元件预览标签页**: 缩略图展示系统级元件库
- ✅ **元件绘制标签页**: 自定义元件设计画布

### 🚀 阶段二：功能扩展

#### 电路设计画布
- ✅ 拖拽操作 (元件拖拽、放置、旋转)
- ✅ 连线系统 (手动连线功能，支持路径编辑)
- ✅ 实时同步 (画布操作与JSON数据实时同步)
- ✅ 快捷键 (Ctrl+S保存，丰富的编辑快捷键)
- ✅ 项目导入导出 (完整文件夹管理，支持新项目和现有项目)

#### LLM智能助手
- 🔄 自然语言交互 (通过对话描述需求)
- 🔄 智能推荐 (LLM分析需求并推荐硬件方案)
- 🔄 自动生成 (基于对话自动生成电路图)
- 🔄 API集成 (支持多种LLM服务提供商)

### 🎨 阶段三：优化与增强
- 🔄 UI/UX优化 (提升用户体验)
- 🔄 更多预设元件 (增加常用硬件元件)
- 🔄 高级LLM交互 (错误排查和代码优化建议)
- 🔄 项目模板 (添加示例库)

## 🔧 开发指南

### 🏗️ 核心架构

```
┌─────────────────┐    ┌─────────────────┐    ┌─────────────────┐
│   主进程        │    │   预加载脚本    │    │   渲染进程      │
│   (main.js)     │◄──►│  (preload.js)   │◄──►│  (renderer.js)  │
│                 │    │                 │    │                 │
│ • 应用生命周期  │    │ • API安全暴露   │    │ • UI交互        │
│ • 窗口管理      │    │ • IPC通信桥接   │    │ • DOM操作       │
│ • 系统操作      │    │ • 上下文隔离    │    │ • 事件处理      │
└─────────────────┘    └─────────────────┘    └─────────────────┘
```

### 📁 核心文件说明

| 文件 | 职责 | 安全特性 |
|------|------|----------|
| **`main.js`** | 应用生命周期、窗口管理、系统操作 | 主进程安全 |
| **`preload.js`** | API安全暴露、IPC通信桥接 | 上下文隔离 |
| **`index.html`** | 应用界面骨架、资源引用 | - |
| **`scripts/`** | 前端功能模块、UI逻辑 | 渲染进程安全 |

### 🛡️ 安全最佳实践

本项目严格遵循Electron安全标准：

- ✅ **上下文隔离**: `contextIsolation: true`
- ✅ **Node集成禁用**: `nodeIntegration: false`
- ✅ **预加载脚本**: 安全API暴露机制
- ✅ **远程模块禁用**: `enableRemoteModule: false`

### 🎨 界面定制

#### 🎨 主题色彩修改

在 `styles/main.css` 中自定义颜色：

```css
:root {
    /* 主色调 */
    --primary-color: #007bff;
    --secondary-color: #6c757d;

    /* 背景色 */
    --bg-primary: #ffffff;
    --bg-secondary: #f8f9fa;

    /* 文字颜色 */
    --text-primary: #212529;
    --text-secondary: #6c757d;
}
```

### 🔍 调试工具

#### 开发者工具
```bash
npm run dev-debug  # 启动并打开开发者工具
```

#### 平台检测
```bash
npm run check-platform  # 环境兼容性检测
```

#### 错误诊断
```bash
npm run error-help      # 智能错误分析
```

#### 控制台调试
```javascript
// 在浏览器控制台中运行
debugComponentDesigner()  // 查看元件设计器状态
```

## 📚 相关文档

### 📖 快速链接
- 🐛 [问题反馈](https://github.com/Designer-Awei/fast-hardware/issues)
- 💡 [功能建议](https://github.com/Designer-Awei/fast-hardware/discussions)
- 📖 [使用文档](https://github.com/Designer-Awei/fast-hardware/wiki)
- 🔄 [最新发布](https://github.com/Designer-Awei/fast-hardware/releases)

### 📚 文档列表
| 文档 | 说明 | 重要性 |
|------|------|--------|
| **[PRD.md](PRD.md)** | 产品需求文档 - 详细的功能规划和技术架构 | 🔴 核心 |
| **[edit_prd.md](edit_prd.md)** | 开发记录 - 完整的技术实现和修复记录 | 🟡 重要 |
| **[data/README.md](data/README.md)** | 数据结构说明 - JSON格式规范和使用指南 | 🟡 重要 |
| **[原始需求文档](Fast%20Hardware.txt)** | 项目初始需求和设计思路 | 🟢 参考 |

## 🤝 贡献指南

### 🚀 参与贡献

1. **Fork 项目**
   ```bash
   git clone https://github.com/Designer-Awei/fast-hardware.git
   cd fast-hardware
   ```

2. **创建功能分支**
   ```bash
   git checkout -b feature/AmazingFeature
   # 或者
   git checkout -b fix/BugFix
   ```

3. **提交更改**
   ```bash
   git commit -m 'Add some AmazingFeature'
   ```

4. **推送到分支**
   ```bash
   git push origin feature/AmazingFeature
   ```

5. **创建 Pull Request**

### 📋 贡献类型

- 🐛 Bug 修复: 修复已知问题
- ✨ 新功能: 添加新特性
- 📚 文档: 改进文档和注释
- 🎨 UI/UX: 界面和用户体验改进
- 🌐 国际化: 多语言支持
- 🧪 测试: 添加或改进测试

### 🔧 开发规范

- 遵循现有的代码风格
- 添加必要的注释和文档
- 确保跨平台兼容性
- 提交前运行测试

## 🔍 调试和故障排除

### 📞 获取帮助

1. **📖 查看文档**
   - [详细使用指南](https://github.com/Designer-Awei/fast-hardware/wiki)
   - [常见问题解答](https://github.com/Designer-Awei/fast-hardware/wiki/FAQ)

2. **🐛 报告问题**
   - [GitHub Issues](https://github.com/Designer-Awei/fast-hardware/issues)
   - 请提供详细的错误信息和复现步骤

3. **💬 社区讨论**
   - [GitHub Discussions](https://github.com/Designer-Awei/fast-hardware/discussions)
   - 分享使用经验和建议

### 🔧 故障排除

遇到问题时，请按以下步骤操作：

1. **环境检查**: `npm run check-platform`
2. **依赖更新**: `npm install`
3. **缓存清理**: `npm run cache clean --force`
4. **错误诊断**: `npm run error-help`
