<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Fast Hardware - 智能硬件开发助手</title>
    <link rel="stylesheet" href="styles/main.css">
    <link rel="stylesheet" href="styles/components.css">
</head>
<body>
    <div id="app">
        <!-- 顶部导航栏 -->
        <nav class="main-nav">
            <div class="nav-brand">
                <h1>Fast Hardware</h1>
            </div>
            <div class="nav-tabs">
                <button class="tab-btn active" data-tab="circuit-design">
                    电路搭建
                </button>
                <button class="tab-btn" data-tab="component-lib">
                    元件管理
                </button>
                <button class="tab-btn" data-tab="settings">
                    系统设置
                </button>
            </div>
            <div class="nav-actions">
                <button class="nav-btn" id="save-project">
                    保存项目
                </button>
                <button class="nav-btn" id="load-project">
                    加载项目
                </button>
            </div>
        </nav>

        <!-- 主内容区域 -->
        <main class="main-content">
            <!-- 电路搭建标签页 -->
            <div id="circuit-design-tab" class="tab-content active">
                <div class="workspace">
                    <!-- 左侧悬浮元件库面板 -->
                    <aside class="floating-panel" id="component-floating-panel">
                        <div class="floating-panel-header">
                            <h3>元件库</h3>
                            <button class="panel-toggle-btn" id="panel-toggle-btn" title="收起面板">
                                <span class="toggle-icon">◀</span>
                            </button>
                        </div>
                        <div class="floating-panel-content">
                            <!-- 搜索和筛选区域 -->
                            <div class="panel-search-section">
                                <input type="text" id="floating-search" placeholder="搜索元件..." />
                                <select id="floating-category-filter">
                                    <option value="all">全部类别</option>
                                    <option value="microcontroller">微控制器</option>
                                    <option value="sensor">传感器</option>
                                    <option value="actuator">执行器</option>
                                    <option value="power">电源模块</option>
                                    <option value="communication">通信模块</option>
                                    <option value="auxiliary">辅助元件</option>
                                    <option value="other">其他</option>
                                </select>
                            </div>
                            <!-- 元件列表区域 -->
                            <div class="component-list" id="component-list">
                                <!-- 元件卡片将在这里动态生成 -->
                                <div class="loading-placeholder">
                                    <p>正在加载元件库...</p>
                                </div>
                            </div>
                        </div>
                    </aside>

                    <!-- 画布区域 -->
                    <section class="canvas-section">
                        <div class="canvas-header">
                            <h2>电路设计画布</h2>
                            <div class="canvas-tools">
                                <button class="tool-btn" id="zoom-in">放大</button>
                                <button class="tool-btn" id="zoom-out">缩小</button>
                                <button class="tool-btn" id="reset-view">重置视图</button>
                                <button class="tool-btn" id="fit-view">适应画布</button>
                            </div>
                        </div>
                        <div class="canvas-container">
                            <canvas id="main-canvas" width="800" height="600"></canvas>
                            <div class="canvas-overlay">
                                <div class="canvas-status">
                                    <span>缩放: <span id="zoom-level">100%</span></span>
                                    <span>坐标: (<span id="mouse-x">0</span>, <span id="mouse-y">0</span>)</span>
                                </div>
                            </div>
                        </div>
                    </section>

                    <!-- 可拖动分割线 -->
                    <div class="resizer" id="resizer">
                        <div class="resizer-handle"></div>
                    </div>

                    <!-- 对话栏区域 -->
                    <section class="chat-section">
                        <div class="chat-header">
                            <h3>🤖 AI硬件助手</h3>
                            <div class="chat-tools">
                                <button class="chat-tool-btn" id="clear-chat">清空</button>
                                <button class="chat-tool-btn" id="export-chat">导出</button>
                            </div>
                        </div>
                        <div class="chat-messages" id="chat-messages">
                            <div class="message ai-message">
                                <div class="message-avatar">🤖</div>
                                <div class="message-content">
                                    <p>你好！我是Fast Hardware智能助手。我可以帮你进行硬件选型、电路设计和代码生成。请告诉我你想要实现什么功能？</p>
                                </div>
                            </div>
                        </div>
                        <div class="chat-input-area">
                            <textarea id="chat-input" placeholder="描述你想要实现的硬件功能，我来帮你设计电路..." rows="3"></textarea>
                            <button class="send-btn" id="send-message">发送</button>
                        </div>
                    </section>
                </div>
            </div>

            <!-- 元件管理标签页 -->
            <div id="component-lib-tab" class="tab-content">
                <div class="component-workspace">
                    <!-- 二级标签页 -->
                    <div class="sub-tabs">
                        <button class="sub-tab-btn active" data-sub-tab="preview">
                            元件预览
                        </button>
                        <button class="sub-tab-btn" data-sub-tab="standard">
                            标准元件
                        </button>
                        <button class="sub-tab-btn" data-sub-tab="custom">
                            自制元件
                        </button>
                        <button class="sub-tab-btn" data-sub-tab="designer">
                            元件绘制
                        </button>
                    </div>

                    <!-- 元件预览子标签页 -->
                    <div id="preview-sub-tab" class="sub-tab-content active">
                        <div class="preview-header">
                            <div class="search-section">
                                <input type="text" id="component-search" placeholder="搜索元件..." />
                                <select id="category-filter">
                                    <option value="all">全部类别</option>
                                    <option value="microcontroller">微控制器</option>
                                    <option value="sensor">传感器</option>
                                    <option value="actuator">执行器</option>
                                    <option value="power">电源模块</option>
                                    <option value="communication">通信模块</option>
                                    <option value="auxiliary">辅助元件</option>
                                    <option value="other">其他</option>
                                </select>
                            </div>
                            <div class="management-section">
                                <button class="btn-secondary" id="manage-components-btn">
                                    <span class="manage-text">元件管理</span>
                                    <span class="delete-text" style="display: none;">删除选中</span>
                                </button>
                            </div>
                        </div>
                        <div class="components-grid" id="components-grid">
                            <!-- 元件卡片将在这里动态生成 -->
                            <div class="loading-placeholder">
                                <p>正在加载元件库...</p>
                            </div>
                        </div>
                    </div>

                    <!-- 标准元件子标签页 -->
                    <div id="standard-sub-tab" class="sub-tab-content">
                        <div class="preview-header">
                            <div class="search-section">
                                <input type="text" id="standard-component-search" placeholder="搜索标准元件..." />
                                <select id="standard-category-filter">
                                    <option value="all">全部类别</option>
                                    <option value="microcontroller">微控制器</option>
                                    <option value="sensor">传感器</option>
                                    <option value="actuator">执行器</option>
                                    <option value="power">电源模块</option>
                                    <option value="communication">通信模块</option>
                                    <option value="auxiliary">辅助元件</option>
                                    <option value="other">其他</option>
                                </select>
                            </div>
                            <div class="management-section">
                                <button class="btn-secondary" id="manage-standard-components-btn">
                                    <span class="manage-text">元件管理</span>
                                    <span class="delete-text" style="display: none;">删除选中</span>
                                </button>
                            </div>
                        </div>
                        <div class="components-grid" id="standard-components-grid">
                            <!-- 标准元件卡片将在这里动态生成 -->
                            <div class="loading-placeholder">
                                <p>正在加载标准元件库...</p>
                            </div>
                        </div>
                    </div>

                    <!-- 自制元件子标签页 -->
                    <div id="custom-sub-tab" class="sub-tab-content">
                        <div class="preview-header">
                            <div class="search-section">
                                <input type="text" id="custom-component-search" placeholder="搜索自制元件..." />
                                <select id="custom-category-filter">
                                    <option value="all">全部类别</option>
                                    <option value="microcontroller">微控制器</option>
                                    <option value="sensor">传感器</option>
                                    <option value="actuator">执行器</option>
                                    <option value="power">电源模块</option>
                                    <option value="communication">通信模块</option>
                                    <option value="auxiliary">辅助元件</option>
                                    <option value="other">其他</option>
                                </select>
                            </div>
                            <div class="management-section">
                                <button class="btn-secondary" id="manage-custom-components-btn">
                                    <span class="manage-text">元件管理</span>
                                    <span class="delete-text" style="display: none;">删除选中</span>
                                </button>
                            </div>
                        </div>
                        <div class="components-grid" id="custom-components-grid">
                            <!-- 自制元件卡片将在这里动态生成 -->
                            <div class="loading-placeholder">
                                <p>正在加载自制元件库...</p>
                            </div>
                        </div>
                    </div>

                    <!-- 元件绘制子标签页 -->
                    <div id="designer-sub-tab" class="sub-tab-content">
                        <div class="designer-header">
                            <h3>自定义元件设计器</h3>
                        </div>
                        <div class="designer-workspace">
                            <!-- 左侧属性面板 -->
                            <div class="designer-panel">
                                <!-- 可滚动的内容区域 -->
                                <div class="designer-panel-content">
                                    <div class="form-group">
                                        <label for="component-name">元件名称</label>
                                        <input type="text" id="component-name" placeholder="例如：自定义传感器" />
                                    </div>
                                    <div class="form-group">
                                        <label for="component-category">元件类别</label>
                                        <select id="component-category">
                                            <option value="microcontroller">微控制器</option>
                                            <option value="sensor">传感器</option>
                                            <option value="actuator">执行器</option>
                                            <option value="power">电源模块</option>
                                            <option value="communication">通信模块</option>
                                            <option value="auxiliary">辅助元件</option>
                                            <option value="other">其他</option>
                                        </select>
                                    </div>
                                    <div class="form-group dimensions-row">
                                        <label for="component-dimensions">尺寸</label>
                                        <div class="dimensions-input">
                                            <input type="number" id="component-width" placeholder="宽度" min="20" max="500" value="100">
                                            <span>×</span>
                                            <input type="number" id="component-height" placeholder="高度" min="20" max="500" value="80">
                                            <span>px</span>
                                        </div>
                                    </div>
                                    <div class="form-group">
                                        <label for="component-description">元件描述</label>
                                        <textarea id="component-description" placeholder="描述元件功能..." rows="3"></textarea>
                                    </div>
                                </div>

                                <!-- 固定在底部的按钮区域 -->
                                <div class="form-actions">
                                    <button class="btn-secondary" id="reset-designer">重置</button>
                                    <button class="btn-primary" id="save-component">保存元件</button>
                                </div>
                            </div>

                            <!-- 右侧设计画布区域 -->
                            <div class="designer-canvas-area">
                                <!-- 工具栏 -->
                                <div class="canvas-toolbar">
                                    <button class="tool-btn" id="reset-view-designer">重置视图</button>
                                    <div class="toolbar-spacer"></div>
                                    <button class="tool-btn" id="reset-component">重置元件</button>
                                </div>

                                <!-- 画布容器 -->
                                <div class="canvas-container">
                                    <canvas id="component-designer-canvas" width="600" height="400"></canvas>
                                    <div class="canvas-overlay">
                                        <div class="canvas-status">
                                            <span>缩放: <span id="designer-zoom-level">100%</span></span>
                                            <span>坐标: (<span id="designer-mouse-x">0</span>, <span id="designer-mouse-y">0</span>)</span>
                                        </div>
                                    </div>
                                </div>

                                <!-- 状态栏 -->
                                <div class="canvas-status-bar">
                                    <span id="status-message">准备开始设计元件</span>
                                    <span id="component-info">元件: 未命名 | 引脚: 0个</span>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- 设置标签页 -->
            <div id="settings-tab" class="tab-content">
                <div class="settings-page">
                    <!-- 设置卡片网格 -->
                    <div class="settings-grid">
                        <!-- 存储设置卡片 -->
                        <div class="setting-card">
                            <div class="card-header">
                                <div class="card-icon">
                                    <span class="icon">📁</span>
                                </div>
                                <div class="card-info">
                                    <h3>存储位置</h3>
                                    <p>设置项目和元件库的保存位置</p>
                                </div>
                            </div>
                            <div class="card-content">
                                <!-- 项目文件夹存储位置 -->
                                <div class="storage-path-row">
                                    <input type="text" class="path-input" id="storage-path-display" placeholder="请选择项目文件夹" readonly />
                                    <button class="btn btn-primary btn-fixed-width" id="change-storage-path">
                                        <span class="btn-icon">📁</span>
                                        项目文件夹
                                    </button>
                                </div>

                                <!-- 系统元件库存储位置 -->
                                <div class="storage-path-row">
                                    <input type="text" class="path-input" id="component-lib-path-display" placeholder="请选择元件库文件夹" readonly />
                                    <button class="btn btn-primary btn-fixed-width" id="change-component-lib-path">
                                        <span class="btn-icon">🔧</span>
                                        系统元件库
                                    </button>
                                </div>
                            </div>
                        </div>

                        <!-- API设置卡片 -->
                        <div class="setting-card">
                            <div class="card-header">
                                <div class="card-icon">
                                    <span class="icon">🔑</span>
                                </div>
                                <div class="card-info">
                                    <h3>AI API</h3>
                                    <p>配置 SiliconFlow API 密钥</p>
                                </div>
                            </div>
                            <div class="card-content">
                                <div class="api-status" id="api-key-status">
                                    <div class="status-badge status-unset">
                                        <span class="status-dot"></span>
                                        未配置
                                    </div>
                                    <p class="status-text">需要API密钥才能使用AI功能</p>
                                </div>
                            </div>
                            <div class="card-actions">
                                <button class="btn btn-secondary" id="configure-api-key">
                                    <span class="btn-icon">⚙️</span>
                                    配置密钥
                                </button>
                            </div>
                        </div>

                        <!-- 快捷键卡片 -->
                        <div class="setting-card">
                            <div class="card-header">
                                <div class="card-icon">
                                    <span class="icon">⌨️</span>
                                </div>
                                <div class="card-info">
                                    <h3>快捷键</h3>
                                    <p>所有可用的键盘快捷键</p>
                                </div>
                            </div>
                            <div class="card-content">
                                <div class="shortcuts-grid">
                                    <div class="shortcut-group">
                                        <h5>画布操作</h5>
                                        <div class="shortcut-item">
                                            <kbd class="key">R</kbd>
                                            <span>旋转选中元件</span>
                                        </div>
                                        <div class="shortcut-item">
                                            <kbd class="key">Delete</kbd>
                                            <span>删除选中元件</span>
                                        </div>
                                        <div class="shortcut-item">
                                            <kbd class="key">Escape</kbd>
                                            <span>取消选中</span>
                                        </div>
                                        <div class="shortcut-item">
                                            <kbd class="key">鼠标滚轮</kbd>
                                            <span>缩放画布</span>
                                        </div>
                                    </div>

                                    <div class="shortcut-group">
                                        <h5>项目管理</h5>
                                        <div class="shortcut-item">
                                            <kbd class="key">Ctrl</kbd> + <kbd class="key">S</kbd>
                                            <span>保存项目</span>
                                        </div>
                                        <div class="shortcut-item">
                                            <kbd class="key">Ctrl</kbd> + <kbd class="key">O</kbd>
                                            <span>打开项目</span>
                                        </div>
                                        <div class="shortcut-item">
                                            <kbd class="key">Tab</kbd>
                                            <span>切换标签页</span>
                                        </div>
                                    </div>

                                    <div class="shortcut-group">
                                        <h5>元件设计</h5>
                                        <div class="shortcut-item">
                                            <kbd class="key">Escape</kbd>
                                            <span>关闭引脚编辑对话框</span>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>


                        <!-- 联系作者卡片 -->
                        <div class="setting-card contact-card">
                            <div class="card-header">
                                <div class="card-icon">
                                    <span class="icon">👨‍💻</span>
                                </div>
                                <div class="card-info">
                                    <h3>联系我们</h3>
                                    <p>获取帮助和反馈</p>
                                </div>
                            </div>
                            <div class="card-content">
                                <p class="contact-description">
                                    访问我们的网站了解更多信息，或在GitHub上提交问题和建议。
                                </p>
                            </div>
                            <div class="card-actions">
                                <button class="btn btn-primary" id="contact-author">
                                    <span class="btn-icon">🌐</span>
                                    访问网站
                                </button>
                            </div>
                        </div>

                        <!-- 关于卡片 -->
                        <div class="setting-card about-card">
                            <div class="card-header">
                                <div class="card-icon">
                                    <span class="icon">ℹ️</span>
                                </div>
                                <div class="card-info">
                                    <h3>关于</h3>
                                    <p>Fast Hardware v0.1.5</p>
                                </div>
                            </div>
                            <div class="card-content">
                                <p class="about-description">
                                    一个智能化的硬件开发辅助工具，帮助新手快速完成电路设计和代码生成。
                                </p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </main>
    </div>

    <!-- JavaScript文件 -->
    <script src="scripts/main.js"></script>
    <script src="scripts/floating-panel.js"></script>
    <script src="scripts/tabs.js"></script>
    <script src="scripts/canvas.js"></script>
    <script src="scripts/chat.js"></script>
    <script src="scripts/components.js"></script>
    <script src="scripts/component-designer.js"></script>
    <script src="scripts/settings.js"></script>
    <script src="scripts/resizer.js"></script>
</body>
</html>
